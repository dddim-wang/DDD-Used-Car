{"ast":null,"code":"import _objectSpread from\"/Users/zhanghan/Desktop/Program lab/used-car-marketplace/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Programming Lab 2: Admin car submission review interface using backend API\n// src/CarReview.js\nimport React,{useState,useEffect}from'react';import'./style.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='http://127.0.0.1:5000';// Flask backend root URL\nconst CarReview=()=>{const[cars,setCars]=useState([]);// Fetch all submitted cars from backend when component mounts\nuseEffect(()=>{fetch(\"\".concat(API_BASE,\"/cars\")).then(res=>res.json()).then(data=>setCars(data.data))// âœ… Extract car list from backend response\n.catch(err=>console.error('Error loading cars:',err));},[]);// Approve a car by sending PUT request to backend\nconst handleApprove=async carId=>{try{const response=await fetch(\"\".concat(API_BASE,\"/cars/\").concat(carId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({approved:true})});if(response.ok){// Update local state to reflect approval\nsetCars(prev=>prev.map(car=>car.id===carId?_objectSpread(_objectSpread({},car),{},{approved:true}):car));}}catch(error){console.error('Error approving car:',error);}};// Reject a car by sending DELETE request to backend\nconst handleReject=async carId=>{try{const response=await fetch(\"\".concat(API_BASE,\"/cars/\").concat(carId),{method:'DELETE'});if(response.ok){// Remove the rejected car from local state\nsetCars(prev=>prev.filter(car=>car.id!==carId));}}catch(error){console.error('Error rejecting car:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"dashboard-title\",children:\"Admin Panel: Review Car Submissions\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDD53 Pending Submissions\"}),cars.filter(car=>!car.approved).length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No pending submissions.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"dashboard-links\",children:cars.filter(car=>!car.approved).map(car=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[car.make,\" \",car.model,\" (\",car.year,\")\"]}),/*#__PURE__*/_jsx(\"br\",{}),\"Price: $\",car.price,/*#__PURE__*/_jsx(\"br\",{}),\"Submitted by: \",car.submittedBy||'Unknown',/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"primary-button\",style:{marginRight:'10px'},onClick:()=>handleApprove(car.id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"todo-delete-button\",onClick:()=>handleReject(car.id),children:\"Reject\"})]})]},car.id))}),/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:'40px'},children:\"\\u2705 Approved Listings\"}),cars.filter(car=>car.approved).length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No approved listings yet.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"dashboard-links\",children:cars.filter(car=>car.approved).map(car=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[car.make,\" \",car.model,\" (\",car.year,\")\"]}),/*#__PURE__*/_jsx(\"br\",{}),\"Price: $\",car.price,/*#__PURE__*/_jsx(\"br\",{}),\"Submitted by: \",car.submittedBy||'Unknown',/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px'},children:/*#__PURE__*/_jsx(\"button\",{className:\"todo-delete-button\",onClick:()=>handleReject(car.id),children:\"Delete Listing\"})})]},car.id))})]});};export default CarReview;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","API_BASE","CarReview","cars","setCars","fetch","concat","then","res","json","data","catch","err","console","error","handleApprove","carId","response","method","headers","body","JSON","stringify","approved","ok","prev","map","car","id","_objectSpread","handleReject","filter","className","children","length","make","model","year","price","submittedBy","style","marginTop","marginRight","onClick"],"sources":["/Users/zhanghan/Desktop/Program lab/used-car-marketplace/frontend/src/CarReview.js"],"sourcesContent":["// Programming Lab 2: Admin car submission review interface using backend API\n// src/CarReview.js\n\nimport React, { useState, useEffect } from 'react';\nimport './style.css';\n\nconst API_BASE = 'http://127.0.0.1:5000'; // Flask backend root URL\n\nconst CarReview = () => {\n  const [cars, setCars] = useState([]);\n\n  // Fetch all submitted cars from backend when component mounts\n  useEffect(() => {\n    fetch(`${API_BASE}/cars`)\n      .then((res) => res.json())\n      .then((data) => setCars(data.data))  // âœ… Extract car list from backend response\n      .catch((err) => console.error('Error loading cars:', err));\n  }, []);\n\n  // Approve a car by sending PUT request to backend\n  const handleApprove = async (carId) => {\n    try {\n      const response = await fetch(`${API_BASE}/cars/${carId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ approved: true }),\n      });\n\n      if (response.ok) {\n        // Update local state to reflect approval\n        setCars((prev) =>\n          prev.map((car) =>\n            car.id === carId ? { ...car, approved: true } : car\n          )\n        );\n      }\n    } catch (error) {\n      console.error('Error approving car:', error);\n    }\n  };\n\n  // Reject a car by sending DELETE request to backend\n  const handleReject = async (carId) => {\n    try {\n      const response = await fetch(`${API_BASE}/cars/${carId}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        // Remove the rejected car from local state\n        setCars((prev) => prev.filter((car) => car.id !== carId));\n      }\n    } catch (error) {\n      console.error('Error rejecting car:', error);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"dashboard-title\">Admin Panel: Review Car Submissions</h1>\n\n      {/* Pending submissions section */}\n      <h2>ðŸ•“ Pending Submissions</h2>\n      {cars.filter((car) => !car.approved).length === 0 ? (\n        <p>No pending submissions.</p>\n      ) : (\n        <ul className=\"dashboard-links\">\n          {cars\n            .filter((car) => !car.approved)\n            .map((car) => (\n              <li key={car.id}>\n                <strong>\n                  {car.make} {car.model} ({car.year})\n                </strong>\n                <br />\n                Price: ${car.price}\n                <br />\n                Submitted by: {car.submittedBy || 'Unknown'}\n                <div style={{ marginTop: '8px' }}>\n                  <button\n                    className=\"primary-button\"\n                    style={{ marginRight: '10px' }}\n                    onClick={() => handleApprove(car.id)}\n                  >\n                    Approve\n                  </button>\n                  <button\n                    className=\"todo-delete-button\"\n                    onClick={() => handleReject(car.id)}\n                  >\n                    Reject\n                  </button>\n                </div>\n              </li>\n            ))}\n        </ul>\n      )}\n\n      {/* Approved listings section */}\n      <h2 style={{ marginTop: '40px' }}>âœ… Approved Listings</h2>\n      {cars.filter((car) => car.approved).length === 0 ? (\n        <p>No approved listings yet.</p>\n      ) : (\n        <ul className=\"dashboard-links\">\n          {cars\n            .filter((car) => car.approved)\n            .map((car) => (\n              <li key={car.id}>\n                <strong>\n                  {car.make} {car.model} ({car.year})\n                </strong>\n                <br />\n                Price: ${car.price}\n                <br />\n                Submitted by: {car.submittedBy || 'Unknown'}\n                <div style={{ marginTop: '8px' }}>\n                  <button\n                    className=\"todo-delete-button\"\n                    onClick={() => handleReject(car.id)}\n                  >\n                    Delete Listing\n                  </button>\n                </div>\n              </li>\n            ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default CarReview;\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}