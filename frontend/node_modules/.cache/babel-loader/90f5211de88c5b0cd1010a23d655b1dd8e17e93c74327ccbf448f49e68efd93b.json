{"ast":null,"code":"// src/Listings.js\n// ✅ Lab 3 Upgrade: Fetch approved listings from backend instead of localStorage\nimport React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Listings=()=>{const[approvedCars,setApprovedCars]=useState([]);const[loading,setLoading]=useState(true);// Optional loading state\nconst[error,setError]=useState(null);// Optional error state\n// Load approved cars from Flask backend on mount\nuseEffect(()=>{fetch('http://127.0.0.1:5000/cars')// Adjust if your backend URL is different\n.then(res=>{if(!res.ok){throw new Error('Failed to fetch car listings.');}return res.json();}).then(data=>{// Access the array inside data.data\nconst approved=data.data.filter(car=>car.approved===true);setApprovedCars(approved);setLoading(false);}).catch(err=>{console.error('Error fetching cars:',err);setError(err.message||'Unknown error');setLoading(false);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-center mb-6\",children:\"Browse Car Listings\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Loading...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-red-500\",children:error}):approvedCars.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"No approved listings available.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:approvedCars.map((car,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-2\",children:[car.make,\" \",car.model]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",car.year,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",car.price,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Mileage:\"}),\" \",car.mileage,\" km\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Transmission:\"}),\" \",car.transmission,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Fuel Type:\"}),\" \",car.fuelType,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"VIN:\"}),\" \",car.vin||'Not provided',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",car.location,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Seller Contact:\"}),\" \",car.contactInfo||'Not provided',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Submitted By:\"}),\" \",car.submittedBy||'Anonymous']}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Image:\"}),' ',car.imageUrl&&/\\.(jpeg|jpg|gif|png|webp)$/i.test(car.imageUrl)?/*#__PURE__*/_jsx(\"img\",{src:car.imageUrl,alt:\"Car\",className:\"w-full h-48 object-cover rounded mt-1\",onError:e=>{e.target.outerHTML='<p class=\"text-gray-500 italic\">Not available</p>';}}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic mt-1\",children:\"Not available\"})]}),car.description&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 mt-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",car.description]})]},index))})]});};export default Listings;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Listings","approvedCars","setApprovedCars","loading","setLoading","error","setError","fetch","then","res","ok","Error","json","data","approved","filter","car","catch","err","console","message","className","children","length","map","index","make","model","year","price","mileage","transmission","fuelType","vin","location","contactInfo","submittedBy","imageUrl","test","src","alt","onError","e","target","outerHTML","description"],"sources":["/Users/zhanghan/Desktop/Program lab/used-car-marketplace/frontend/src/Listings.js"],"sourcesContent":["// src/Listings.js\n// ✅ Lab 3 Upgrade: Fetch approved listings from backend instead of localStorage\n\nimport React, { useEffect, useState } from 'react';\n\nconst Listings = () => {\n  const [approvedCars, setApprovedCars] = useState([]);\n  const [loading, setLoading] = useState(true); // Optional loading state\n  const [error, setError] = useState(null);     // Optional error state\n\n  // Load approved cars from Flask backend on mount\n  useEffect(() => {\n    fetch('http://127.0.0.1:5000/cars')  // Adjust if your backend URL is different\n      .then((res) => {\n        if (!res.ok) {\n          throw new Error('Failed to fetch car listings.');\n        }\n        return res.json();\n      })\n      .then((data) => {\n        // Access the array inside data.data\n        const approved = data.data.filter((car) => car.approved === true);\n        setApprovedCars(approved);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error('Error fetching cars:', err);\n        setError(err.message || 'Unknown error');\n        setLoading(false);\n      });\n  }, []);\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-3xl font-bold text-center mb-6\">Browse Car Listings</h1>\n\n      {loading ? (\n        <p className=\"text-center text-gray-600\">Loading...</p>\n      ) : error ? (\n        <p className=\"text-center text-red-500\">{error}</p>\n      ) : approvedCars.length === 0 ? (\n        <p className=\"text-center text-gray-600\">No approved listings available.</p>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {approvedCars.map((car, index) => (\n            <div key={index} className=\"bg-white rounded-xl shadow-lg p-4\">\n              <h2 className=\"text-xl font-semibold mb-2\">\n                {car.make} {car.model}\n              </h2>\n\n              <p className=\"text-gray-700 mb-2\">\n                <strong>Year:</strong> {car.year}<br />\n                <strong>Price:</strong> ${car.price}<br />\n                <strong>Mileage:</strong> {car.mileage} km<br />\n                <strong>Transmission:</strong> {car.transmission}<br />\n                <strong>Fuel Type:</strong> {car.fuelType}<br />\n                <strong>VIN:</strong> {car.vin || 'Not provided'}<br />\n                <strong>Location:</strong> {car.location}<br />\n                <strong>Seller Contact:</strong> {car.contactInfo || 'Not provided'}<br />\n                <strong>Submitted By:</strong> {car.submittedBy || 'Anonymous'}\n              </p>\n\n              {/* Image with label */}\n              <div className=\"mb-2\">\n                <strong>Image:</strong>{' '}\n                {car.imageUrl && /\\.(jpeg|jpg|gif|png|webp)$/i.test(car.imageUrl) ? (\n                  <img\n                    src={car.imageUrl}\n                    alt=\"Car\"\n                    className=\"w-full h-48 object-cover rounded mt-1\"\n                    onError={(e) => {\n                      e.target.outerHTML = '<p class=\"text-gray-500 italic\">Not available</p>';\n                    }}\n                  />\n                ) : (\n                  <p className=\"text-gray-500 italic mt-1\">Not available</p>\n                )}\n              </div>\n\n              {/* Optional description */}\n              {car.description && (\n                <p className=\"text-gray-700 mt-2\">\n                  <strong>Description:</strong> {car.description}\n                </p>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Listings;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}